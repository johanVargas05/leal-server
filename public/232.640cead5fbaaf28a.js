"use strict";(self.webpackChunkleal_project=self.webpackChunkleal_project||[]).push([[232],{9232:(D,p,s)=>{s.r(p),s.d(p,{LoginModule:()=>x});var u=s(9808),m=s(1316),d=s(5861),a=s(2382),l=s(2340),e=s(5e3),f=s(4464),v=s(520),Z=s(3568),L=s(9099);let h=(()=>{class r{constructor(t,o,c,i){this._http=t,this._messageService=o,this._router=c,this.sharingService=i}login(t){var o=this;return(0,d.Z)(function*(){const c=o._http.post(`${l.N.urlServer}auth/login`,t);try{const{user:i,token:G}=yield(0,f.n)(c);o.sharingService.sharingDataUserData=i,o.sharingService.sharingPointsUserData={points:i.points};const B=JSON.stringify({id:i._id,roles:i.roles});return localStorage.setItem(l.N.userData,B),localStorage.setItem(l.N.tokenKey,G),o._messageService.alertMessage("Leal Coins","Bienvenido disfrutar de la experiencia LEAL","success"),o._router.navigateByUrl("app"),!0}catch(i){return 401==i.status||400==i.status?o._messageService.alertMessage("Leal Coins","Oops! parece que tus credenciales son incorrectas vuelve a intentarlo","error"):(console.log(i),o._messageService.alertMessage("Leal Coins","Oops! algo salio mal vuelve a intentarlo","error"),!1)}})()}}return r.\u0275fac=function(t){return new(t||r)(e.LFG(v.eN),e.LFG(Z.H),e.LFG(m.F0),e.LFG(L.b))},r.\u0275prov=e.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var y=s(934);function T(r,n){1&r&&(e.TgZ(0,"span"),e._uU(1,"Iniciar sesi\xf3n"),e.qZA())}function S(r,n){1&r&&e._UZ(0,"span",23)}function A(r,n){1&r&&(e.TgZ(0,"span"),e._uU(1,"Processing..."),e.qZA())}const g=function(){return{type:"required",message:"Este campo es requerido."}},b=function(){return{type:"pattern",message:"El correo ingresado no es valido"}},C=function(){return{type:"error_credentials",message:"Tu correo puede ser invalido"}},F=function(r,n,t){return[r,n,t]},I=function(r){return{control:"email",errors:r}},U=function(){return{type:"error_credentials",message:"Tu Contrase\xf1a puede ser invalida"}},N=function(r,n){return[r,n]},J=function(r){return{control:"password",errors:r}},q=[{path:"",component:(()=>{class r{constructor(t,o){this._FormBuilder=t,this._loginService=o,this.processStatus=!1,this.formLogin=this._FormBuilder.group({password:["",a.kI.required],email:["",[a.kI.required,a.kI.email,a.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],recordarme:[!1]})}ngOnInit(){this.validReadme()}login(){var t=this;return(0,d.Z)(function*(){const o=t.formLogin.value;o.recordarme&&localStorage.setItem(l.N.readme,JSON.stringify(o.recordarme)),delete o.recordarme,(yield t._loginService.login(o))||(t.formLogin.controls.email.setErrors({error_credentials:!0}),t.formLogin.controls.password.setErrors({error_credentials:!0}),t.formLogin.markAllAsTouched())})()}validReadme(){const{email:t}=JSON.parse(localStorage.getItem(l.N.readme)||"");let o=!1;o=!!t,this.formLogin.patchValue({email:t,recordarme:o})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(a.qu),e.Y36(h))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-login"]],decls:34,vars:25,consts:[[1,"card","animate__animated","animate__fadeInLeft","animate__slow"],[1,"row"],[1,"col-md-5","pe-md-0"],[1,"d-flex","justify-content-center","align-items-center","h-100","bg-opacity-25","bg-primary"],["src","/assets/images/others/login.png","alt","Register",1,"d-none","d-md-block","w-100","h-auto"],[1,"col-md-7","ps-md-0"],[1,"px-4","py-5"],[1,"d-block","text-center","display-5","text-primary"],[1,"text-dark"],[1,"text-muted","fw-normal","mb-4","text-center"],["autocomplete","off",1,"forms-sample",3,"formGroup","submit"],[1,"form-group"],[1,"control-label"],["type","email","formControlName","email",1,"form-control"],[3,"FormGroupControl","options"],["type","password","formControlName","password",1,"form-control"],[1,"form-check","mb-3"],["type","checkbox","id","recordarme","formControlName","recordarme",1,"form-check-input"],["for","recordarme",1,"form-check-label"],["type","submit",1,"btn","btn-primary","me-2","mb-2","float-start",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm ml-2","role","status","aria-hidden","true",4,"ngIf"],["type","button","routerLink","../register",1,"btn","btn-outline-secondary","btn-icon-text","mb-2","mb-md-0"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","ml-2"]],template:function(t,o){1&t&&(e.TgZ(0,"article",0),e.TgZ(1,"section",1),e.TgZ(2,"section",2),e.TgZ(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.qZA(),e.TgZ(5,"section",5),e.TgZ(6,"section",6),e.TgZ(7,"p",7),e._uU(8,"LEAL"),e.TgZ(9,"span",8),e._uU(10,"COINS"),e.qZA(),e.qZA(),e.TgZ(11,"h5",9),e._uU(12,"\xa1Bienvenido de nuevo! Ingresa a tu cuenta."),e.qZA(),e.TgZ(13,"form",10),e.NdJ("submit",function(){return o.login()}),e.TgZ(14,"div",11),e.TgZ(15,"label",12),e._uU(16,"Correo electr\xf3nico"),e.qZA(),e._UZ(17,"input",13),e._UZ(18,"app-error-input",14),e.qZA(),e.TgZ(19,"div",11),e.TgZ(20,"label",12),e._uU(21,"Contrase\xf1a"),e.qZA(),e._UZ(22,"input",15),e._UZ(23,"app-error-input",14),e.qZA(),e.TgZ(24,"div",16),e._UZ(25,"input",17),e.TgZ(26,"label",18),e._uU(27," Recordarme "),e.qZA(),e.qZA(),e.TgZ(28,"button",19),e.YNc(29,T,2,0,"span",20),e.YNc(30,S,1,0,"span",21),e.YNc(31,A,2,0,"span",20),e.qZA(),e.TgZ(32,"button",22),e._uU(33,"Registrarse"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(13),e.Q6J("formGroup",o.formLogin),e.xp6(5),e.Q6J("FormGroupControl",o.formLogin)("options",e.VKq(16,I,e.kEZ(12,F,e.DdM(9,g),e.DdM(10,b),e.DdM(11,C)))),e.xp6(5),e.Q6J("FormGroupControl",o.formLogin)("options",e.VKq(23,J,e.WLB(20,N,e.DdM(18,g),e.DdM(19,U)))),e.xp6(5),e.Q6J("disabled",o.formLogin.invalid||o.processStatus),e.xp6(1),e.Q6J("ngIf",!o.processStatus),e.xp6(1),e.Q6J("ngIf",o.processStatus),e.xp6(1),e.Q6J("ngIf",o.processStatus))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,y.L,a.Wl,u.O5,m.rH],styles:[""]}),r})()}];let M=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[u.ez,m.Bz.forChild(q)]]}),r})();var _=s(5886);let x=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[[u.ez,_.m,M]]}),r})()}}]);