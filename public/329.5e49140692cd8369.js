"use strict";(self.webpackChunkleal_project=self.webpackChunkleal_project||[]).push([[329],{329:($,g,n)=>{n.r(g),n.d(g,{RegisterModule:()=>j});var u=n(9808),c=n(1316),f=n(5861),a=n(2382);class p{static patternValidator(o,s){return r=>r.value?o.test(r.value)?null:s:null}static passwordMatchValidator(o){var s,r,l;(null===(s=o.get("password"))||void 0===s?void 0:s.value)!==(null===(r=o.get("passwordConfirmation"))||void 0===r?void 0:r.value)&&(null===(l=o.get("passwordConfirmation"))||void 0===l||l.setErrors({NoPasswordMatch:!0}))}}var e=n(5e3),_=n(4004),F=n(4464),m=n(2340),T=n(520),w=n(3568),A=n(9099);let b=(()=>{class t{constructor(s,r,l,i){this._http=s,this._messageService=r,this._router=l,this.sharingService=i}register(s){var r=this;return(0,f.Z)(function*(){const l=r._http.post(`${m.N.urlServer}auth/register`,s).pipe((0,_.U)(i=>i));try{const{user:i,token:d}=yield(0,F.n)(l);r.sharingService.sharingDataUserData=i,r.sharingService.sharingPointsUserData={points:i.points};const k=JSON.stringify({id:i._id,roles:i.roles});return localStorage.setItem(m.N.userData,k),localStorage.setItem(m.N.tokenKey,d),r._messageService.alertMessage("Leal Coins","Felicitaciones ya puedes disfrutar de la experiencia LEAL","success"),r._router.navigateByUrl("app"),!0}catch(i){return 400==i.status?r._messageService.alertMessage("Leal Coins","Oops! parece que ya estas registrado, te invitamos a iniciar sesi\xf3n","error"):(r._messageService.alertMessage("Leal Coins","Oops! algo salio mal vuelve a intentarlo","error"),!1)}})()}}return t.\u0275fac=function(s){return new(s||t)(e.LFG(T.eN),e.LFG(w.H),e.LFG(c.F0),e.LFG(A.b))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Z=n(934);function S(t,o){1&t&&(e.TgZ(0,"p",13),e._UZ(1,"i",14),e.TgZ(2,"span"),e._uU(3,"\xa1Debe tener al menos 8 caracteres!"),e.qZA(),e.qZA())}function q(t,o){1&t&&(e.TgZ(0,"p",13),e._UZ(1,"i",14),e.TgZ(2,"span"),e._uU(3,"Debe ser al menos 1 n\xfamero!"),e.qZA(),e.qZA())}function y(t,o){1&t&&(e.TgZ(0,"p",13),e._UZ(1,"i",14),e.TgZ(2,"span"),e._uU(3,"Debe tener al menos 1 letra may\xfascula!"),e.qZA(),e.qZA())}function P(t,o){1&t&&(e.TgZ(0,"p",13),e._UZ(1,"i",14),e.TgZ(2,"span"),e._uU(3,"Debe tener al menos 1 letra min\xfascula!"),e.qZA(),e.qZA())}function U(t,o){1&t&&(e.TgZ(0,"p",13),e._UZ(1,"i",14),e.TgZ(2,"span"),e._uU(3,"\xa1Debe tener al menos 1 car\xe1cter especial!"),e.qZA(),e.qZA())}function V(t,o){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Oqu(s.textButton)}}function J(t,o){1&t&&e._UZ(0,"span",15)}function R(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1,"Processing..."),e.qZA())}const h=function(t){return{"col-md-6":t}},v=function(){return{type:"required",message:"Este campo es requerido"}},N=function(t){return[t]},I=function(t){return{control:"password",errors:t}},x=function(){return{type:"NoPasswordMatch",message:"Las contrase\xf1as no coinciden"}},L=function(t,o){return[t,o]},M=function(t){return{control:"passwordConfirmation",errors:t}};let Q=(()=>{class t{constructor(){this.processStatus=!1,this.colOption=!0,this.textButton="Cambiar contrase\xf1a",this.Submit=new e.vpe}ngOnInit(){}get minCharacter(){return!this.resetPassForm.controls.password.value||this.resetPassForm.controls.password.hasError("minlength")}get number(){return!this.resetPassForm.controls.password.value||this.resetPassForm.controls.password.hasError("hasNumber")}get capitalCase(){return!this.resetPassForm.controls.password.value||this.resetPassForm.controls.password.hasError("hasCapitalCase")}get smallCase(){return!this.resetPassForm.controls.password.value||this.resetPassForm.controls.password.hasError("hasSmallCase")}get specialCharacters(){return!this.resetPassForm.controls.password.value||this.resetPassForm.controls.password.hasError("hasSpecialCharacters")}submitResetPassForm(){this.Submit.emit(!0)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-password-validator"]],inputs:{resetPassForm:"resetPassForm",processStatus:"processStatus",colOption:"colOption",textButton:"textButton"},outputs:{Submit:"Submit"},decls:22,vars:32,consts:[["autocomplete","off",1,"forms-sample",3,"formGroup","ngSubmit"],[1,"row"],[1,"form-group",3,"ngClass"],["for","password",1,"control-label"],["type","password","id","password1","placeholder","Contrase\xf1a","formControlName","password",1,"form-control"],[3,"FormGroupControl","options"],["for","passwordConfirmation",1,"control-label"],["type","password","id","passwordConfirmation","placeholder","Confirma tu contrase\xf1a","formControlName","passwordConfirmation",1,"form-control"],[1,"my-2","d-block","text-center"],["class","me-2 text-danger",4,"ngIf"],["type","submit",1,"btn","btn-primary","me-2","mb-2","float-start",3,"disabled"],[4,"ngIf"],["class","spinner-border spinner-border-sm ml-2","role","status","aria-hidden","true",4,"ngIf"],[1,"me-2","text-danger"],[1,"feather","me-1","icon-x-circle"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","ml-2"]],template:function(s,r){1&s&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return r.submitResetPassForm()}),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"label",3),e._uU(4,"Contrase\xf1a"),e.qZA(),e._UZ(5,"input",4),e._UZ(6,"app-error-input",5),e.qZA(),e.TgZ(7,"div",2),e.TgZ(8,"label",6),e._uU(9,"Confirma tu contrase\xf1a"),e.qZA(),e._UZ(10,"input",7),e._UZ(11,"app-error-input",5),e.qZA(),e.qZA(),e.TgZ(12,"article",8),e.YNc(13,S,4,0,"p",9),e.YNc(14,q,4,0,"p",9),e.YNc(15,y,4,0,"p",9),e.YNc(16,P,4,0,"p",9),e.YNc(17,U,4,0,"p",9),e.qZA(),e.TgZ(18,"button",10),e.YNc(19,V,2,1,"span",11),e.YNc(20,J,1,0,"span",12),e.YNc(21,R,2,0,"span",11),e.qZA(),e.qZA()),2&s&&(e.Q6J("formGroup",r.resetPassForm),e.xp6(2),e.Q6J("ngClass",e.VKq(16,h,r.colOption)),e.xp6(4),e.Q6J("FormGroupControl",r.resetPassForm)("options",e.VKq(21,I,e.VKq(19,N,e.DdM(18,v)))),e.xp6(1),e.Q6J("ngClass",e.VKq(23,h,r.colOption)),e.xp6(4),e.Q6J("FormGroupControl",r.resetPassForm)("options",e.VKq(30,M,e.WLB(27,L,e.DdM(25,v),e.DdM(26,x)))),e.xp6(2),e.Q6J("ngIf",r.minCharacter),e.xp6(1),e.Q6J("ngIf",r.number),e.xp6(1),e.Q6J("ngIf",r.capitalCase),e.xp6(1),e.Q6J("ngIf",r.smallCase),e.xp6(1),e.Q6J("ngIf",r.specialCharacters),e.xp6(1),e.Q6J("disabled",r.resetPassForm.invalid||r.processStatus),e.xp6(1),e.Q6J("ngIf",!r.processStatus),e.xp6(1),e.Q6J("ngIf",r.processStatus),e.xp6(1),e.Q6J("ngIf",r.processStatus))},directives:[a._Y,a.JL,a.sg,u.mk,a.Fj,a.JJ,a.u,Z.L,u.O5],styles:[""]}),t})();const C=function(){return{type:"required",message:"Este campo es requerido."}},D=function(t){return[t]},G=function(t){return{control:"fullName",errors:t}},O=function(){return{type:"pattern",message:"El correo ingresado no es valido"}},B=function(t,o){return[t,o]},E=function(t){return{control:"email",errors:t}},Y=[{path:"",component:(()=>{class t{constructor(s,r){this._FormBuilder=s,this._registerService=r,this.processStatus=!1,this.formRegister=this._FormBuilder.group({fullName:["",a.kI.required],email:["",[a.kI.required,a.kI.email,a.kI.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,4}$")]],password:["",a.kI.compose([a.kI.required,p.patternValidator(/\d/,{hasNumber:!0}),p.patternValidator(/[A-Z]/,{hasCapitalCase:!0}),p.patternValidator(/[a-z]/,{hasSmallCase:!0}),p.patternValidator(/[`!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/,{hasSpecialCharacters:!0}),a.kI.minLength(8)])],passwordConfirmation:["",[a.kI.required]]},{validator:p.passwordMatchValidator})}ngOnInit(){}registerUser(){var s=this;return(0,f.Z)(function*(){s.processStatus=!0;const r=s.formRegister.value;delete r.passwordConfirmation,yield s._registerService.register(r),s.processStatus=!1})()}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(a.qu),e.Y36(b))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-register"]],decls:27,vars:20,consts:[[1,"card","animate__animated","animate__fadeInLeft","animate__slow"],[1,"row"],[1,"col-md-5","pe-md-0"],[1,"d-flex","justify-content-center","align-items-center","h-100","bg-opacity-25","bg-primary"],["src","/assets/images/others/register.png","alt","Register",1,"d-none","d-md-block","w-100","h-auto"],[1,"col-md-7","ps-md-0"],[1,"px-4","py-5"],[1,"d-block","text-center","display-5","text-primary"],[1,"text-dark"],[1,"text-muted","fw-normal","mb-4","text-center"],["autocomplete","off",1,"forms-sample",3,"formGroup"],[1,"form-group"],[1,"control-label"],["type","text","formControlName","fullName",1,"form-control"],[3,"FormGroupControl","options"],["type","email","formControlName","email",1,"form-control"],["textButton","Registrarme",3,"resetPassForm","processStatus","colOption","Submit"],["type","button","routerLink","../login",1,"btn","btn-outline-secondary","btn-icon-text","mb-2","mb-md-0"]],template:function(s,r){1&s&&(e.TgZ(0,"article",0),e.TgZ(1,"section",1),e.TgZ(2,"section",2),e.TgZ(3,"div",3),e._UZ(4,"img",4),e.qZA(),e.qZA(),e.TgZ(5,"section",5),e.TgZ(6,"section",6),e.TgZ(7,"p",7),e._uU(8,"LEAL"),e.TgZ(9,"span",8),e._uU(10,"COINS"),e.qZA(),e.qZA(),e.TgZ(11,"h5",9),e._uU(12,"\xa1Bienvenido al registro! Estas a un solo paso."),e.qZA(),e.TgZ(13,"form",10),e.TgZ(14,"div",11),e.TgZ(15,"label",12),e._uU(16,"Nombre completo"),e.qZA(),e._UZ(17,"input",13),e._UZ(18,"app-error-input",14),e.qZA(),e.TgZ(19,"div",11),e.TgZ(20,"label",12),e._uU(21,"Correo electr\xf3nico"),e.qZA(),e._UZ(22,"input",15),e._UZ(23,"app-error-input",14),e.qZA(),e.TgZ(24,"app-password-validator",16),e.NdJ("Submit",function(){return r.registerUser()}),e.qZA(),e.TgZ(25,"button",17),e._uU(26,"Iniciar sesi\xf3n"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&s&&(e.xp6(13),e.Q6J("formGroup",r.formRegister),e.xp6(5),e.Q6J("FormGroupControl",r.formRegister)("options",e.VKq(11,G,e.VKq(9,D,e.DdM(8,C)))),e.xp6(5),e.Q6J("FormGroupControl",r.formRegister)("options",e.VKq(18,E,e.WLB(15,B,e.DdM(13,C),e.DdM(14,O)))),e.xp6(1),e.Q6J("resetPassForm",r.formRegister)("processStatus",r.processStatus)("colOption",!0))},directives:[a._Y,a.JL,a.sg,a.Fj,a.JJ,a.u,Z.L,Q,c.rH],styles:[""]}),t})()}];let K=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[u.ez,c.Bz.forChild(Y)]]}),t})();var z=n(5886);let j=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[u.ez,K,z.m]]}),t})()}}]);